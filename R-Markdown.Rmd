---
title: R, RStudio ve RMarkdown ile Tekrarlanabilir Rapor^[Bu bir derlemedir, mümkün mertebe alıntılara linklerle referans vermeye çalıştım.]
author: "[Serdar Balcı, MD, Pathologist](https://sbalci.github.io/)"
institute: "[serdarbalci.com](https://www.serdarbalci.com)"
date: "`r format(Sys.Date())`"
output:
  revealjs::revealjs_presentation:
    theme: sky
    highlight: pygments
    center: true
    smart: true
    transition: fade
    self_contained: true
    reveal_options:
      slideNumber: true
      previewLinks: true
  rmdshower::shower_presentation:
  html_notebook:
    fig_caption: yes
    highlight: kate
    number_sections: yes
    theme: flatly
    toc: yes
    toc_depth: 5
    toc_float: yes
  xaringan::moon_reader:
    lib_dir: libs
    nature:
      beforeInit: ["macros.js", "https://platform.twitter.com/widgets.js"]
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
    self_contained: true
  prettydoc::html_pretty:
    theme: leonids
    highlight: github
  pdf_document:
    toc: yes
    toc_depth: '5'
  html_document:
    fig_caption: yes
    keep_md: yes
    toc: yes
    toc_depth: 5
    toc_float: yes
editor_options: 
  chunk_output_type: inline
---


```{r global_options, include=FALSE}
knitr::opts_chunk$set(fig.width = 12, fig.height = 8, fig.path = 'Figs/', echo = FALSE, warning = FALSE, message = FALSE, error = FALSE, eval = TRUE, tidy = TRUE, comment = NA)
```

```{r eval=FALSE, include=FALSE}
# xaringan::inf_mr()
# servr::daemon_stop(1)
# servr::daemon_stop(2)
```



# Tekrarlanabilir Analiz ve Rapor

Replication crisis


???

Articles and Tweets


---

# RStudio ile proje oluştur


bu nasıl oldu


---

# R Notebook

## RNotebook vs RMarkdown



![](https://youtu.be/zNzZ1PfUDNk)




---

# R Markdown


- R Markdown: The Definitive Guide

https://bookdown.org/yihui/rmarkdown/




---

## Use R Markdown

https://andrewbtran.github.io/NICAR/2018/workflow/docs/02-rmarkdown.html

- Troubleshooting in R Markdown

https://smithcollege-sds.github.io/sds-public/rmarkdown_problems.html


---

## Use R Markdown

http://kbroman.org/knitr_knutshell/pages/Rmarkdown.html

- Knitr & R Markdown

https://kbroman.org/knitr_knutshell/pages/overview.html

https://kbroman.org/knitr_knutshell/pages/Rmarkdown.html

https://kbroman.org/knitr_knutshell/pages/markdown.html


---

## Use R Markdown

- render markdown via code

*inside R*

```
markdown::markdownToHTML('markdown_example.md', 
'markdown_example.html')
```

*command line*

```
R -e "markdown::markdownToHTML('markdown_example.md',
'markdown_example.html')"
```


---

## Use R Markdown


- pandoc Rstudio integration

*command line*

```
export PATH=$PATH:/Applications/RStudio.app/Contents/MacOS/pandoc
```


```
R -e "rmarkdown::render('markdown_example.md')"
```


---

## Use R Markdown

https://gist.github.com/MinhasKamal/7fdebb7c424d23149140



---

## Use R Markdown

https://onp4.com/

```
csv {headers: true, title: "**Drawing Tables In Markdown**"}
Name, Surname, Known As, Age
Marcelo, David, coldzera, 22
Oleksandr, Kostyliev, s1mple, 19
Nikola, Kovač, NiKo, 20
Richard, Papillon, shox, 25
Nicolai, Reedtz, dev1ce, 21
```

```
{pgn}
[Event "Bled-Zagreb-Belgrade Candidates"]
[Site "Bled, Zagreb & Belgrade YUG"]
[Date "1959.10.11"]
[Round "20"]
[Result "1-0"]
[White "Mikhail Tal"]
[Black "Robert James Fischer"]

1. d4 Nf6 2. c4 g6 3. Nc3 Bg7 4. e4 d6 5.               
Be2 O-O 6. Nf3 e5 7. d5 Nbd7 8. Bg5 h6 9. 
Bh4 a6 10. O-O Qe8 11. Nd2 Nh7 12. b4 Bf6 
13. Bxf6 Nhxf6 14. Nb3 Qe7 15. Qd2 Kh7 16. 
Qe3 Ng8 17. c5 f5 18. exf5 gxf5 19. f4 exf4 
20. Qxf4 dxc5 21. Bd3 cxb4 22. Rae1 Qf6 23. 
Re6 Qxc3 24. Bxf5+ Rxf5 25. Qxf5+ Kh8 26. 
Rf3 Qb2 27. Re8 Nf6 28. Qxf6+ Qxf6 29. Rxf6 
Kg7 30. Rff8 Ne7 31. Na5 h5 32. h4 Rb8 33. 
Nc4 b5 34. Ne5 1-0
```

---

## Use R Markdown

```
{r, results='asis'}
 iris %>%
  tibble::as_tibble() %>%
  details::details(summary = 'tibble')
```


---

## Use R Markdown

- Keeping Credentials Secret with Keyrings in R

https://ras44.github.io/blog/2019/01/19/keeping-credentials-secret-with-keyrings-in-r.html

- How to build a website with Blogdown in R

http://www.storybench.org/how-to-build-a-website-with-blogdown-in-r/

---

# Chunk Options

> {r global_options, include=FALSE}
> knitr::opts_chunk$set(fig.width=12, fig.height=8, fig.path='Figs/', echo=FALSE, warning=FALSE, message=FALSE, include = FALSE)
> knitr::opts_chunk$set(fig.width = 12, fig.height = 8, fig.path = 'Figs/', echo = FALSE, warning = FALSE, message = FALSE, error = FALSE, eval = TRUE, tidy = TRUE, comment = NA)


```
{r global_options, include=FALSE}
knitr::opts_chunk$set(fig.width = 12, fig.height = 8, fig.path = 'Figs/', echo = FALSE, warning = FALSE, message = FALSE, error = FALSE, eval = TRUE, tidy = TRUE, comment = NA)
```

---

# R Markdown örneği

```{r}
suppressPackageStartupMessages(library("tidyverse"))
suppressPackageStartupMessages(library("survival"))
suppressPackageStartupMessages(library("finalfit"))
```

---

# R Markdown örneği


```{r}
data("cancer")
cancer
# foreign::write.foreign(df = cancer,
#                        datafile = "data/cancer.sav",
#                        codefile = "data/cancer.spo",
#                        package = "SPSS"
#                        )
```


```{r}
data("lung")
lung
```


```{r}
# data("colon_s")
# colon_s
# 
# writexl::write_xlsx(x = colon_s,
#                     path = "data/colon_s.xlsx",
#                     col_names = TRUE,
#                     format_headers = TRUE)

```



---

# R Markdown örneği

```{r warning=FALSE}
summarytools::what.is(x = lung, 
                      show.all = TRUE, 
                      ignore.size.warn = TRUE)
```


---

# R Markdown örneği

summarytools
descriptives


---

# R Markdown örneği

recode



---

# R Markdown örneği

crosstables

---

# R Markdown örneği


survival


---

# Güncellemeler olunca kodlar çalışacak mı?

- packrat

- renv

https://environments.rstudio.com

- docker

- Yeni R sürümleri 

RSwitch

https://rud.is/rswitch/

Using RSwitch

https://rud.is/rswitch/guide/



---

# Yedeklemeyi nasıl yapacağız


## Save Final Data


```
{r}
saved data after analysis to `mydata.xlsx`.

save.image(file = here::here("data", "mydata_work_space.RData"))

readr::write_rds(x = mydata, path = here::here("data", "mydata_afteranalysis.rds"))

saveRDS(object = mydata, file = here::here("data", "mydata.rds"))

writexl::write_xlsx(mydata, here::here("data", "mydata.xlsx"))

paste0(rownames(file.info(here::here("data", "mydata.xlsx"))), " : ", file.info(here::here("data", "mydata.xlsx"))$ctime)

```




## Yedeklemeyi nasıl yapacağız


**GitHub**

```
{r github push}
CommitMessage <- paste("updated on ", Sys.time(), sep = "")
wd <- getwd()
gitCommand <- paste("cd ", 
                    wd,
                    " \n git add . \n git commit --message '",
                    CommitMessage,
                    "' \n git push origin master \n",
                    sep = ""
                    )
system(command = gitCommand,
       intern = TRUE
)
```



---


# Libraries Used

```{r library citation, echo=TRUE}
citation()
```

---

# Session Info

```{r session info, echo=TRUE}
sessionInfo()
```

---

# Yedekleme

```{r github push}
CommitMessage <- paste("updated on ", Sys.time(), sep = "")
wd <- getwd()
gitCommand <- paste("cd ", 
                    wd,
                    " \n git add . \n git commit --message '",
                    CommitMessage,
                    "' \n git push origin master \n",
                    sep = ""
                    )

system(command = gitCommand,
       intern = TRUE
)
```



---

# Sonraki Konular

- RStudio ile GitHub kullanımı
- ...


---

# Sunum Linkleri

https://sbalci.github.io/MyRCodesForDataAnalysis/R-Markdown.nb.html
https://sbalci.github.io/MyRCodesForDataAnalysis/R-Markdown.html

https://forms.gle/UqGJBiAjB8uLPRon8

---


# Geri Bildirim

- Geri bildirim için tıklayınız: _[Geri bildirim formu](https://goo.gl/forms/YjGZ5DHgtPlR1RnB3)_


---


<script id="dsq-count-scr" src="//https-sbalci-github-io.disqus.com/count.js" async></script>

<div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://https-sbalci-github-io.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


---

# İletişim  

Completed on `r Sys.Date()`.  

Serdar Balci, MD, Pathologist  
drserdarbalci@gmail.com  

https://rpubs.com/sbalci/CV   
https://sbalci.github.io/  
https://github.com/sbalci  
https://twitter.com/serdarbalci




